<app-register-appointment (loadData)="loadAppointments()"></app-register-appointment>
<h2 class="text-center color-primary">
    Citas Medicas
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 128 128"><path fill="#bacfd4" d="M4.36 94.22S4.3 30.27 4.3 28.44c0-2.01 1.05-2.36 2.73-2.41c1.61-.05 112.48-.1 114.23-.05c2.29.06 2.5 1.5 2.58 3.33s.02 64.96.02 64.96l-62.63 1.16z"/><path fill="#6ba4ae" d="M4.36 94.22s.03 26.54.03 27.92s1 2.38 2.89 2.38s112.59-.25 114.1-.25s2.38-1.38 2.51-3.64s-.01-26.37-.01-26.37z"/><path fill="#546f7a" d="m33.83 102.57l.11 21.87h59.32l.1-22.29z"/><path fill="#b9ced3" d="M40.1 103.67v20.75h3.3v-21.04zm21.93-.39v21.11h3.34v-21.43zm22.61.04v21.12h3.43v-21.57z"/><path fill="#f1edec" d="M39.45 94.47S39.1 8.98 39.1 7.13s.71-3.31 2.56-3.43s41.76-.12 43.38 0s2.65 1.12 2.65 3.2s.23 87.57.23 87.57l16.89 2.08v5.09c0 1.62-.58 2.26-2.26 2.26H23.59c-1.5 0-1.97-1.56-1.97-3.18v-5.44z"/><path fill="#fefffd" d="m21.66 97.05l83.15-.04s.05-1.79 0-2.68c-.07-1.26-1.14-1.3-3.58-1.3H23.6c-1.06 0-1.88.37-1.96 1.43s.02 2.54.02 2.59"/><path fill="#546f7a" d="M47.49 65.41c.23.23 31.31.37 31.51.16c.18-.19.32-11.69.08-11.93c-.31-.31-31.35-.24-31.59 0s-.24 11.52 0 11.77m.08 9.75c-.41.14-.08 11.69-.08 11.69l31.67-.24s.28-11.18-.24-11.44c-.32-.17-30.86-.17-31.35-.01m44.49-41.35v12.74h12.01v-12.9zm16.76-.16h11.37l.16 12.74h-11.61zm-.16 20.31l-.08 12.33h11.53l.16-12.33zm-4.59-.08H91.98v12.41h12.25zm.08 20.47H92.06V87h12.25c0 .01-.32-12.81-.16-12.65m4.51-.08h11.44v12.9h-11.44s.12-13.02 0-12.9m-84.3 12.57V74.03l11.77-.16v12.81zm-4.51-.08V73.95H7.84l.08 12.98c0-.01 12.09-.17 11.93-.17M7.76 53.64h12.17v12.33H7.76zm16.76-.08v12.41h11.45V53.64zm.16-20.39H35.8v12.98H24.68zm-4.99.48l-11.77-.08v12.41h11.77z"/><path fill="#dd0c26" d="M56.94 20.78s-.02-12.35.07-13.19c.08-.85.59-1.02 1.19-1.02c.59 0 10.85 0 11.44.08s.85.59.85 1.53v12.54s12.2.08 12.71.08s1.02.59 1.02 1.27v11.18c0 .76-.08 1.53-1.02 1.69s-12.79 0-12.79 0v14.09c0 .58-.49 1.08-1.31 1.14s-10.99 0-11.56 0s-.57-1.71-.57-2.29V35.24H43.69c-.58 0-.83-.57-.89-1.65s.04-10.86.06-11.43c.04-.89.38-1.32 1.01-1.38c.62-.05 13.07 0 13.07 0"/><path fill="#fff" d="M62.13 11.57h3.16v34.1h-3.16z"/><path fill="#fff" d="M47.69 26.26h31.56v3.21H47.69z"/></svg>
</h2>
<section>
    <div class="d-flex flex-wrap justify-content-center" *ngIf="appointments.length > 0">
        <div class="p-2" *ngFor="let appointment of appointments; let i = index">
            <div class="card relative p-1 shadow-card" style="width: 18rem;">
                <span class="position-absolute rounded-circle px-2 bcg-primary text-white">{{i+1}}</span>
                <div class="d-flex justify-content-between p-4">
                    <div class="border-bottom border-info roundeds">
                        <span>{{appointment.appointmentDate && formatDate(appointment.appointmentDate)}}</span>
                        <span>{{appointment.appointmentTime}}</span>
                    </div>
                </div>
                <h6 class="text-center">{{appointment.names}} {{appointment.lastnames}}</h6>
                <small class="text-center text-secondary font-italic">Edad: {{appointment.birthDate && calculateAge(appointment.birthDate)}} a√±os</small>
                <div class="card-body">
                    <h6 class="card-title">{{appointment.email}}</h6>
                    <h6>Observaciones:</h6>
                    <p class="card-text">{{appointment.observations}}</p>
                    <div class="d-flex justify-content-between">
                        <a [routerLink]="['actualiza', appointment.id]" class="btn btn-outline-success">
                            Actualizar
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path fill="#176B87" stroke="#000" d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z"/><path stroke="#fff" d="M33.5424 27C32.2681 31.0571 28.4778 34 24.0002 34C19.5226 34 15.7323 31.0571 14.458 27V33"/><path stroke="#fff" d="M33.5424 15V21C32.2681 16.9429 28.4778 14 24.0002 14C19.5226 14 15.7323 16.9429 14.458 21"/></g></svg>
                        </a>
                        <button type="button" (click)="deleteAppointment(appointment.id)" class="btn btn-outline-danger">
                            Elimnar
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><path fill="#d1c4e9" d="M38 7H10c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h28c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m0 12H10c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h28c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2m0 12H10c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h28c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2"/><circle cx="38" cy="38" r="10" fill="#f44336"/><g fill="#fff"><path d="m43.31 41.181l-2.12 2.122l-8.485-8.484l2.121-2.122z"/><path d="m34.819 43.31l-2.122-2.12l8.484-8.485l2.122 2.121z"/></g></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="appointments.length === 0">
        <p>No se encontraron registros.</p>
    </div>
</section>